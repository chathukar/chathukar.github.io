<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Let me show you this!</title>
    
    <!-- Import Firebase (update these URLs with the latest version) -->
    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-analytics.js"></script>
    
    <style>
        #messageContainer {
            margin-top: 20px;
        }
        .message {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <textarea id="myTextarea" rows="1" cols="50"></textarea>
    <div id="messageContainer"></div>
    
    <script>
        // Your web app's Firebase configuration (you'll get this from Firebase Console)
        const firebaseConfig = {
            apiKey: "AIzaSyA973XL9wV_FNXLmbwFGwhg00O3SJmJj1E",
            authDomain: "letmeshowyouthis-42d37.firebaseapp.com",
            databaseURL: "https://letmeshowyouthis-42d37-default-rtdb.firebaseio.com",
            projectId: "letmeshowyouthis-42d37",
            storageBucket: "letmeshowyouthis-42d37.firebasestorage.app",
            messagingSenderId: "518467169936",
            appId: "1:518467169936:web:f701130cba79b926273215",
            measurementId: "G-PPFE0F696B"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        console.log("Firebase initialized");

        const textarea = document.getElementById('myTextarea');
        const messageContainer = document.getElementById('messageContainer');

        // Listen for new messages
        database.ref('messages').on('child_added', (snapshot) => {
            const message = snapshot.val();
            addMessageToContainer(message.text);
        });

        textarea.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const message = textarea.value;
                console.log("Enter pressed, message:", message);
                if (message.trim() !== '') {
                    // Save message to Firebase
                    database.ref('messages').push({
                        text: message,
                        timestamp: firebase.database.ServerValue.TIMESTAMP
                    })
                    .then(() => console.log("Message saved to Firebase"))
                    .catch(error => console.error("Error saving message:", error));
                    
                    textarea.value = '';
                }
            }
        });

        function addMessageToContainer(message) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            messageDiv.textContent = message;
            messageContainer.insertBefore(messageDiv, messageContainer.firstChild);
        }
    </script>
</body>
</html>